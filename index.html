<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Minecraft Animator Pro 3D</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #1a1a1a; font-family: 'Segoe UI', sans-serif; }
        #ui-container { position: absolute; top: 10px; left: 10px; color: white; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 8px; border: 1px solid #555; pointer-events: auto; }
        h1 { margin: 0 0 10px 0; font-size: 18px; color: #55a82f; }
        .hint { font-size: 12px; color: #aaa; margin-top: 10px; }
        canvas { display: block; }
    </style>
</head>
<body>

    <div id="ui-container">
        <h1>MC Animator Studio</h1>
        <div id="gui-target"></div>
        <div class="hint">Utilise la souris pour tourner la cam√©ra<br>Molette pour zoomer</div>
    </div>

    <!-- Biblioth√®ques : 3D (Three.js), Contr√¥les (Orbit), Interface (lil-gui) -->
    <script src="https://cdnjs.cloudflare.com"></script>
    <script src="https://cdn.jsdelivr.net"></script>
    <script src="https://cdn.jsdelivr.net"></script>

    <script>
        // --- 1. SETUP DE LA SCENE ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x222222);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        camera.position.set(5, 5, 10);
        controls.update();

        // Lumi√®res
        const light = new THREE.DirectionalLight(0ffffff, 1);
        light.position.set(5, 10, 7.5);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0x404040));

        // Sol (Grid)
        const grid = new THREE.GridHelper(20, 20, 0x55a82f, 0x444444);
        scene.add(grid);

        // --- 2. CR√âATION DU PERSONNAGE (HI√âRARCHIE) ---
        const steveGroup = new THREE.Group();
        scene.add(steveGroup);

        const material = new THREE.MeshLambertMaterial({ color: 0x00aaff });
        const skinTex = new THREE.TextureLoader().load('https://mc-heads.net');
        const headMat = new THREE.MeshLambertMaterial({ map: skinTex });

        // T√™te
        const head = new THREE.Mesh(new THREE.BoxGeometry(2, 2, 2), headMat);
        head.position.y = 5;
        steveGroup.add(head);

        // Corps
        const body = new THREE.Mesh(new THREE.BoxGeometry(2, 3, 1), material);
        body.position.y = 2.5;
        steveGroup.add(body);

        // Bras Droit
        const armR = new THREE.Group();
        const armRMesh = new THREE.Mesh(new THREE.BoxGeometry(1, 3, 1), material);
        armRMesh.position.y = -1.5;
        armR.add(armRMesh);
        armR.position.set(-1.5, 4, 0);
        steveGroup.add(armR);

        // Jambe Droite
        const legR = new THREE.Group();
        const legRMesh = new THREE.Mesh(new THREE.BoxGeometry(1, 3, 1), material);
        legRMesh.position.y = -1.5;
        legR.add(legRMesh);
        legR.position.set(-0.5, 1, 0);
        steveGroup.add(legR);

        // --- 3. INTERFACE DE CONTR√îLE (LIL-GUI) ---
        const settings = {
            rotationTete: 0,
            brasDroit: 0,
            jambeDroite: 0,
            vitesseDanse: 0,
            couleurCorps: "#00aaff",
            reset: () => {
                settings.rotationTete = 0;
                settings.brasDroit = 0;
                settings.jambeDroite = 0;
                settings.vitesseDanse = 0;
                armR.rotation.x = 0;
                legR.rotation.x = 0;
                head.rotation.y = 0;
            }
        };

        const gui = new lil.GUI({ container: document.getElementById('gui-target') });
        gui.add(settings, 'rotationTete', -1.5, 1.5).name('Tourner T√™te').listen();
        gui.add(settings, 'brasDroit', -3, 3).name('Bouger Bras').listen();
        gui.add(settings, 'jambeDroite', -1, 1).name('Bouger Jambe').listen();
        gui.add(settings, 'vitesseDanse', 0, 0.2).name('Mode Danse üíÉ');
        gui.addColor(settings, 'couleurCorps').name('Couleur').onChange(v => material.color.set(v));
        gui.add(settings, 'reset').name('R√©initialiser');

        // --- 4. BOUCLE D'ANIMATION ---
        function animate() {
            requestAnimationFrame(animate);

            // Appliquer les contr√¥les manuels
            head.rotation.y = settings.rotationTete;
            armR.rotation.x = settings.brasDroit;
            legR.rotation.x = settings.jambeDroite;

            // Mode Danse Automatique
            if (settings.vitesseDanse > 0) {
                const t = Date.now() * settings.vitesseDanse * 0.1;
                armR.rotation.x = Math.sin(t) * 2;
                legR.rotation.x = Math.cos(t) * 1;
                steveGroup.position.y = Math.abs(Math.sin(t)) * 0.5;
            }

            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>
