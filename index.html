<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Animation Minecraft</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background-color: #1a1a1a; color: #ffffff; margin: 0; padding: 20px; }
        h1 { color: #55a82f; text-shadow: 2px 2px #000; }
        canvas { border: 5px solid #333; background-color: #f0f0f0; box-shadow: 0px 0px 20px rgba(0,0,0,0.5); image-rendering: pixelated; margin-top: 10px; }
        .interface { margin: 20px; padding: 20px; background: #2c2c2c; border-radius: 15px; display: inline-block; border: 1px solid #444; }
        label { font-weight: bold; margin-right: 10px; }
        button { padding: 12px 25px; cursor: pointer; background: #55a82f; color: white; border: none; border-radius: 8px; font-weight: bold; transition: 0.2s; }
        button:hover { background: #6bc23d; transform: scale(1.05); }
        input[type=range] { vertical-align: middle; cursor: pointer; }
    </style>
</head>
<body>

    <h1>Animateur Minecraft v1.0</h1>

    <!-- ZONE DE DESSIN -->
    <canvas id="tonCanvas" width="800" height="400"></canvas>

    <br>

    <!-- PANNEAU DE CONTROLE -->
    <div class="interface">
        <label>VITESSE :</label>
        <input type="range" id="vitesseRange" min="0" max="15" value="4">
        <span id="valeurVitesse" style="display:inline-block; width:30px;">4</span>
        
        <button id="boutonStop" style="margin-left: 20px;">PAUSE / LECTURE</button>
    </div>

    <script>
        const canvas = document.getElementById('tonCanvas');
        const ctx = canvas.getContext('2d');
        const vitesseInput = document.getElementById('vitesseRange');
        const vitesseAffichage = document.getElementById('valeurVitesse');
        const boutonStop = document.getElementById('boutonStop');

        // Préparation de l'image de Steve
        const steveImg = new Image();
        steveImg.crossOrigin = "anonymous";
        steveImg.src = 'https://mc-heads.net'; 

        let posX = 0;
        let mouvement = true;
        let imagePrete = false;

        // Quand l'image a fini de charger
        steveImg.onload = () => { 
            imagePrete = true; 
            console.log("Image de Steve chargée !");
        };

        function boucleAnimation() {
            if (mouvement) {
                // 1. Nettoyer le fond
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // 2. Dessiner le personnage (Steve ou Carré de secours)
                if (imagePrete) {
                    ctx.drawImage(steveImg, posX, 150, 100, 100);
                } else {
                    ctx.fillStyle = "#55a82f"; // Vert Minecraft
                    ctx.fillRect(posX, 150, 100, 100);
                    ctx.strokeStyle = "#000";
                    ctx.strokeRect(posX, 150, 100, 100);
                }

                // 3. Calculer la prochaine position
                let vitesse = parseFloat(vitesseInput.value);
                vitesseAffichage.innerText = vitesse;
                posX += vitesse;

                // 4. Revenir au début si on sort
                if (posX > canvas.width) {
                    posX = -100;
                }
            }
            requestAnimationFrame(boucleAnimation);
        }

        // Contrôle du bouton
        boutonStop.addEventListener('click', () => {
            mouvement = !mouvement;
            boutonStop.style.background = mouvement ? "#55a82f" : "#a82f2f";
        });

        // Lancement direct
        boucleAnimation();
    </script>

</body>
</html>
